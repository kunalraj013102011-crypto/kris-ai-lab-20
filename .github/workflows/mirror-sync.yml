name: Sync MAIN to Mirror Repos

on:
  push:
    branches:
      - main

jobs:
  mirror-sync:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Push to kris-lab
        run: |
          git config --global user.name "kris-sync-bot"
          git config --global user.email "sync@kris.ai"
          git remote add krislab https://x-access-token:${{ secrets.KRIS_AI }}@github.com/kunalraj013102011-crypto/kris-lab.git
          git push krislab main --force

      - name: Push to project-handover-hub
        run: |
          git remote add handover https://x-access-token:${{ secrets.KRIS_AI }}@github.com/kunalraj013102011-crypto/project-handover-hub.git
          git push handover main --force
